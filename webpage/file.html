<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Virtual Therapist</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            width: 90%;
            max-width: 600px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background-color: #5b8e7d;
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .chat-container {
            height: 400px;
            overflow-y: auto;
            padding: 20px;
            background-color: #fafafa;
        }
        
        .message {
            margin-bottom: 15px;
            display: flex;
        }
        
        .user-message {
            justify-content: flex-end;
        }
        
        .therapist-message {
            justify-content: flex-start;
        }
        
        .message-content {
            max-width: 70%;
            padding: 10px 15px;
            border-radius: 18px;
        }
        
        .user-message .message-content {
            background-color: #5b8e7d;
            color: white;
        }
        
        .therapist-message .message-content {
            background-color: #e8e8e8;
            color: #333;
        }
        
        .input-area {
            display: flex;
            padding: 15px;
            border-top: 1px solid #eee;
        }
        
        input {
            flex: 1;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
            font-size: 16px;
        }
        
        button {
            background-color: #5b8e7d;
            color: white;
            border: none;
            border-radius: 20px;
            padding: 12px 20px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover {
            background-color: #4a7a6a;
        }
        
        .disclaimer {
            padding: 15px;
            font-size: 12px;
            text-align: center;
            color: #777;
            background-color: #f9f9f9;
            border-top: 1px solid #eee;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Virtual Therapist</h1>
            <p>I'm here to listen and help you reflect</p>
        </div>
        
        <div class="chat-container" id="chat">
            <div class="message therapist-message">
                <div class="message-content">
                    Hello, I'm your virtual therapist. What would you like to talk about today?
                </div>
            </div>
        </div>
        
        <div class="input-area">
            <input type="text" id="user-input" placeholder="Type your thoughts here..." autocomplete="off">
            <button onclick="sendMessage()">Send</button>
        </div>
        
        <div class="disclaimer">
            Disclaimer: This is a basic virtual assistant, not a replacement for professional therapy. If you're in crisis, please contact a licensed mental health professional or emergency services.
        </div>
    </div>

    <script>
        // Store conversation context
        let conversationContext = [];
        
        // Function to add a message to the chat
        function addMessage(message, isUser) {
            const chat = document.getElementById('chat');
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'message user-message' : 'message therapist-message';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = message;
            
            messageDiv.appendChild(contentDiv);
            chat.appendChild(messageDiv);
            
            // Scroll to bottom
            chat.scrollTop = chat.scrollHeight;
            
            // Add to conversation context
            conversationContext.push({
                role: isUser ? 'user' : 'therapist',
                message: message
            });
            
            // Keep only the last 10 exchanges for context
            if (conversationContext.length > 10) {
                conversationContext = conversationContext.slice(-10);
            }
        }
        
        // Function to generate therapist response
        function generateResponse(userMessage) {
            // Convert conversation context to a string for pattern matching
            const contextString = conversationContext.map(entry => 
                `${entry.role}: ${entry.message}`
            ).join('\n');
            
            // Check for specific patterns in the conversation
            if (userMessage.toLowerCase().includes('anxious') || 
                userMessage.toLowerCase().includes('anxiety') ||
                userMessage.toLowerCase().includes('nervous')) {
                return "I hear that you're feeling anxious. Can you tell me more about what's triggering these feelings? Sometimes identifying the source can help manage anxiety.";
            }
            
            if (userMessage.toLowerCase().includes('depress') || 
                userMessage.toLowerCase().includes('sad') ||
                userMessage.toLowerCase().includes('hopeless')) {
                return "It sounds like you might be experiencing some difficult emotions. Would it help to talk about what's been happening recently that's contributing to these feelings?";
            }
            
            if (userMessage.toLowerCase().includes('angry') || 
                userMessage.toLowerCase().includes('mad') ||
                userMessage.toLowerCase().includes('frustrat')) {
                return "Anger is a natural emotion. Can you help me understand what situation is causing these feelings? Sometimes talking it through can provide perspective.";
            }
            
            if (userMessage.toLowerCase().includes('stress') || 
                userMessage.toLowerCase().includes('overwhelm')) {
                return "Stress can feel overwhelming. Would it help to break down what's causing the stress into smaller, more manageable pieces?";
            }
            
            if (userMessage.toLowerCase().includes('sleep') || 
                userMessage.toLowerCase().includes('insomnia') ||
                userMessage.toLowerCase().includes('tired')) {
                return "Sleep difficulties can significantly impact our wellbeing. Have you noticed any patterns or changes in your routine that might be affecting your sleep?";
            }
            
            // Generic empathetic responses
            const responses = [
                "I appreciate you sharing that with me. How does that make you feel?",
                "Thank you for opening up. Can you tell me more about that?",
                "I'm listening. What thoughts come up when you reflect on this?",
                "That sounds challenging. How have you been coping with this?",
                "I understand. What do you think would help in this situation?",
                "Let's explore that further. What meaning does this have for you?",
                "That's insightful. How long have you been feeling this way?",
                "I hear you. What would you like to be different about this situation?",
                "Thank you for trusting me with this. What's the hardest part about this for you?",
                "I can see why that would be difficult. What support do you have in your life right now?"
            ];
            
            // Return a random response
            return responses[Math.floor(Math.random() * responses.length)];
        }
        
        // Function to send user message
        function sendMessage() {
            const userInput = document.getElementById('user-input');
            const message = userInput.value.trim();
            
            if (message === '') return;
            
            // Add user message to chat
            addMessage(message, true);
            
            // Clear input
            userInput.value = '';
            
            // Generate and add therapist response after a short delay
            setTimeout(() => {
                const response = generateResponse(message);
                addMessage(response, false);
            }, 1000);
        }
        
        // Allow sending message with Enter key
        document.getElementById('user-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>

